gtpj() {
    cd $(ls -d $HOME/projects/* | grep "$1")
}

lpj(){
    ls -al $HOME/projects
}

cpj(){
    if [ -z "$1" ]
    then
        echo "Se require nombre de projecto"
    else
        cd $HOME/projects
        mkdir "$1"
    fi
}

sapp(){
    if [ -z "$1" ]
    then
        echo "Se require nombre de projecto"
    else
        gtpj "$1"
        if [ -f app.js ]; then
            nodemon app.js
        fi
    fi
}

ecmd() {
    vim $HOME/.bashfiles/personaCommands
}

reload(){
    source $HOME/.bash_profile
}

runApp(){
    NODE_ENV='development' $(pwd)/node_modules/electron/dist/electron .
}

clearDocker(){
  bash $HOME/.bashfiles/cleanDocker.sh
}

compileImage(){
  docker build --rm --tag $(basename `pwd`) .
}

compileGcloudImage(){
  tagName=gcr.io/${PROJECTID}/$(basename `pwd`)
  docker tag $(basename `pwd`) $tagName
  docker push $tagName
}

runDockerApp(){
  docker run -it -p 8081:80 $(basename `pwd`)
}

deployProduction(){
  gcloud app deploy app_production.yaml
}

initRailsProject(){
  RAILSPATH=$PWD
  APPNAME=$(basename $RAILSPATH)
  COMPOSEFILE=${APPNAME}docker-compose.yml
  cd $HOME/.bashfiles/dockerImages/rails
  cp docker-compose.example.yml $COMPOSEFILE
  sed -i '.original' -e "s~RAILSPATH~${RAILSPATH}~g" $COMPOSEFILE
  rm -rf ${COMPOSEFILE}.original
  docker-compose -f $COMPOSEFILE build
  cd $RAILSPATH
}

runRailsProject(){
  RAILSPATH=$PWD
  APPNAME=$(basename $RAILSPATH)
  COMPOSEFILE=${APPNAME}docker-compose.yml
  cd $HOME/.bashfiles/dockerImages/rails
  sed -i '.original' -e "s~APPNAME~${APPNAME}~g" $COMPOSEFILE
  rm -rf ${COMPOSEFILE}.original
  docker-compose -f $COMPOSEFILE up -d
  docker attach $APPNAME
  cd $RAILSPATH
}

runRailsC(){
  APPNAME=$(basename `pwd`)
  if [ -z "$1" ]
  then
    docker exec -it $APPNAME bin/rails c
  else
    docker exec -it $APPNAME bin/rails c "$1"
  fi
}

runRake(){
  APPNAME=$(basename `pwd`)
  docker exec -it $APPNAME bundle exec rake "$1"
}
